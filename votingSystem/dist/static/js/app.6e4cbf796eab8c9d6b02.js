webpackJsonp([1],{"5ovd":function(e,t){},"8a5D":function(e,t){},Dup0:function(e,t){},HuQ1:function(e,t){},JTp8:function(e,t){},NHnr:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("7+uW"),o={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},s=a("VU/8")(null,o,!1,function(e){a("hiuc")},null,null).exports,l=a("/ocq"),r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"readMe layout"},[e._m(0,!1,!1),e._v(" "),a("article",[a("caption",[e._v("README.md")]),e._v(" "),a("div",{staticClass:"content"},[a("h1",[e._v("voting-manage-system")]),e._v(" "),a("p",[e._v("基于Vue.js 2.x系列 + Element UI 的投票活动后台管理系统")]),e._v(" "),a("h1",[e._v("前言")]),e._v(" "),a("p",[e._v("用VUE + Element组件库做的投票活动后台管理系统，\b功能及系统框架仍需继续完善")]),e._v(" "),a("h1",[e._v("功能")]),e._v(" "),a("ul",[a("li",[a("el-checkbox",{attrs:{checked:"",disabled:""}}),a("span",[e._v("Element UI")])],1),e._v(" "),a("li",[a("el-checkbox",{attrs:{checked:"",disabled:""}}),a("span",[e._v("投票活动管理")])],1),e._v(" "),a("li",[a("el-checkbox",{attrs:{checked:"",disabled:""}}),a("span",[e._v("用户管理")])],1),e._v(" "),a("li",[a("el-checkbox",{attrs:{checked:"",disabled:""}}),a("span",[e._v("系统配置")])],1),e._v(" "),a("li",[a("el-checkbox",{attrs:{checked:"",disabled:""}}),a("span",[e._v("前台配置")])],1)])])])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("h1",{staticClass:"title"},[t("i",{staticClass:"el-icon-tickets"}),this._v("自述")])}]},n=a("VU/8")({data:function(){return{name:"about"}}},r,!1,function(e){a("jWFu")},null,null).exports,c=a("Zrlr"),u=a.n(c),d=a("wxAW"),m=a.n(d),v=a("mtWM"),p=a.n(v),h={url:"/colife/activity/vote",method:"GET",baseURL:"http://mycolife.imwork.net",headers:{"Content-Type":"application/x-www-form-urlencoded"},params:{},data:{},timeout:1e5,responseType:"json",transformRequest:[function(e){return e}],transformResponse:[function(e){return e}]},g=a("mw3O"),f=a.n(g),b=function(){function e(){u()(this,e)}return m()(e,[{key:"get",value:function(e){return p.a.get(e.url,h)}},{key:"post",value:function(e){return p.a.post(e.url,f.a.stringify(e.datas),h)}},{key:"put",value:function(e){return p.a.put(e.url,f.a.stringify(e.datas),h)}},{key:"delete",value:function(e){return p.a.delete(e.url,h)}},{key:"reqSuccess",value:function(e,t){e.$message({message:t,type:"success"})}},{key:"reqFail",value:function(e,t){e.$message({message:t,type:"error"})}},{key:"formatDate",value:function(e,t,a){var i=new Date(e),o=i.getFullYear(),s=i.getMonth()+1;s=s.toString().length<=1?"0"+s.toString():s;var l=i.getDate();l=l.toString().length<=1?"0"+l.toString():l;var r=i.getHours();r=r.toString().length<=1?"0"+r.toString():r;var n=i.getMinutes().length<=1?"0"+i.getMinutes():i.getMinutes();n=n.toString().length<=1?"0"+n.toString():n;var c=i.getSeconds().length<=1?"0"+i.getSeconds():i.getSeconds();return c=c.toString().length<=1?"0"+c.toString():c,a?o+"年"+s+"月"+l+"日 "+r+"时"+n+"分"+c+"秒":o+t+s+t+l+" "+r+":"+n+":"+c}}]),e}(),_=new b,y={url:"/colife/activity/vote?pageNumber=1&pageSize=20",datas:{}},C=!1,F={beforeMount:function(){this.initDatas()},methods:{initDatas:function(){y.url="/colife/activity/vote?pageNumber=1&pageSize=10",y.datas={},this.loading=!0;this.ajaxMethod(this,y,"投票活动列表初始化失败，请刷新重试！","all")},ajaxMethod:function(e,t,a,i){return _.get(t).then(function(t){var a=t.data;e.tableData=[],a.data.content.forEach(function(t){var a={};a=t,t.objId&&(a.voteId=t.objId),t.createTime&&(a.createDate=_.formatDate(t.createTime,"-",!1).split(" ")[0]),t.beginTime&&(a.beginTime=_.formatDate(t.beginTime,"-",!1).split(" ")[0]),t.endTime&&(a.endTime=_.formatDate(t.endTime,"-",!1).split(" ")[0]),t.title&&(a.voteTitle=t.title),a.activityState=e.switchStutsNumToStr(t.activityState),a.published=0===t.published?"未发布":"已发布",e.tableData.push(a)}),e.page.total=a.data.totalElements,e.page.pageSize=a.data.size,e.page.totalPages=a.data.totalPages,e.page.currentPage=a.data.number+1,e.loading=!1,C=!0}).catch(function(t){t&&console.log(t),e.loading=!1,_.reqFail(e,a),C=!1}),C},ajaxMethodDelete:function(e,t,a,i){_.delete(t).then(function(t){e.loading=!1,e.initDatas()}).catch(function(t){e.loading=!1,console.log(t)})},switchStutsNumToStr:function(e){var t="";switch(e){case-1:t="全部";break;case 1:t="未开始";break;case 2:t="进行中";break;case 3:t="已结束"}return t},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},editVote:function(){var e="";return 0===this.multipleSelection.length?(_.reqFail(this,"未选中活动，请至少选择一项"),!1):this.multipleSelection.length>1?(_.reqFail(this,"仅能选一项进行修改"),!1):(e=this.multipleSelection[0].voteId,void this.$router.push("/editVote/editVote/"+e))},handleEdit:function(e,t){var a=t.objId;this.$router.push("/editVote/editVoteItems/"+a)},handleDelete:function(e,t){y.datas={},y.url="/colife/activity/vote?objIds="+t.voteId;this.loading=!0;this.ajaxMethodDelete(this,y,"删除数据失败")},modifyVoteOpenOrClose:function(e){var t="",a="";e?(y.url="/colife/activity/vote/publish",t="发布投票活动操作失败",a="已发布"):(y.url="/colife/activity/vote/unpublish",t="停止投票活动操作失败",a="未发布");var i="";for(var o in this.multipleSelection)i+=this.multipleSelection[o].voteId,i+=",";if(i=i.substring(0,i.length-1),!this.multipleSelection>0)return _.reqFail(this,"未选中活动，请至少选择一项"),!1;y.datas={},i="?objIds="+i,y.url+=i;var s=this;return _.get(y).then(function(e){s.multipleSelection.forEach(function(e){var t=s.tableData.indexOf(e);s.tableData[t].published=a}),C=!0}).catch(function(e){e&&console.log(e),s.loading=!1,_.reqFail(s,t),C=!1}),C},startVote:function(){var e="";this.modifyVoteOpenOrClose(!0)&&(e="成功发布选中投票活动",this.$message({showClose:!0,message:e,type:"warning"}))},stopVote:function(){var e="";this.modifyVoteOpenOrClose(!1)&&(e="成功停止选中投票活动",this.$message({showClose:!0,message:e,type:"warning"}))},itemsDelete:function(){var e="";for(var t in this.multipleSelection)e+=this.multipleSelection[t].voteId,e+=",";if(e=e.substring(0,e.length-1),!this.multipleSelection>0)return _.reqFail(this,"未选中活动，请至少选择一项"),!1;y.datas={},y.url="/colife/activity/vote?objIds="+e;this.loading=!0,this.ajaxMethodDelete(this,y,"批量删除数据失败")},handleChange:function(e){this.loading=!0,(y={}).url="/colife/activity/vote?activityState="+e+"&pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,y,"刷新投票活动列表失败")},handleSizeChange:function(e){this.loading=!0,this.page.pageSize=e,(y={}).datas={},y.url="/colife/activity/vote?pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,y,"刷新投票活动列表失败")},handleCurrentChange:function(e){this.loading=!0,this.page.currentPage=e,(y={}).datas={},y.url="/colife/activity/vote?pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,y,"刷新投票活动列表失败")},search:function(){if(""===this.searchKeyWord.replace(/(^\s*)|(\s*$)/gi,""))return _.reqFail(this,"关键词不能为空"),!1;this.loading=!0,y.datas={},y.url="/colife/activity/vote?name="+this.searchKeyWord+"&pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,y,"搜索失败，请稍后重试")},createNewVote:function(){this.$router.push("/createNewItem")}},data:function(){return{loading:!0,page:{total:100,pageSizeOptions:[5,10,25,50,100,200],pageSize:15,currentPage:1},classificationsOptions:[{value:-1,label:"全部"},{value:1,label:"未开始"},{value:2,label:"进行中"},{value:3,label:"已结束"}],classifications:"",searchKeyWord:"",tableData:[],multipleSelection:[]}}},x={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-table layout"},[a("nav",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/voteManager"}}},[a("i",{staticClass:"el-icon-document"}),e._v("投票管理")])],1)],1),e._v(" "),a("div",{staticClass:"tool-bar"},[a("div",{staticClass:"tool-bar-btns"},[a("el-badge",{staticClass:"item control ",attrs:{value:12}},[a("el-button",{staticClass:"control ",attrs:{size:"small",id:"createVote",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.createNewVote}},[e._v("新建投票")])],1),e._v(" "),a("el-badge",{staticClass:"item control ",attrs:{value:12}},[a("el-button",{staticClass:"control",attrs:{size:"small",id:"editVote",icon:"el-icon-edit",type:"primary"},on:{click:e.editVote}},[e._v("修改投票")])],1),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"startVote",icon:"el-icon-upload2",type:"primary"},on:{click:e.startVote}},[e._v("发布投票")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"stopVote",icon:"el-icon-remove-outline",type:"primary"},on:{click:e.stopVote}},[e._v("停止投票")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"deleteVote",type:"danger",icon:"el-icon-delete"},on:{click:e.itemsDelete}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"tool-bar-others"},[a("el-select",{staticClass:"control",attrs:{filterable:"",placeholder:"投票状态"},on:{change:e.handleChange},model:{value:e.classifications,callback:function(t){e.classifications=t},expression:"classifications"}},e._l(e.classificationsOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,command:e.label}})})),e._v(" "),a("div",{staticClass:"search"},[a("el-input",{staticClass:"control input",attrs:{placeholder:"请输入投票名称关键词",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),e._v(" "),a("el-button",{staticClass:"control",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"date",order:"descending"},border:"","header-row-class-name":"tabel-header","highlight-current-row":"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"投票活动名称","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"published",label:"是否发布",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"创建日期",width:"105",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"beginTime",label:"开始时间",width:"105",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",width:"105",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"activityState",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-badge",{staticClass:"editVoteItems",attrs:{value:12}},[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("\b修改投票项")])],1),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("统计")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.pageSizeOptions,"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])},staticRenderFns:[]},w=a("VU/8")(F,x,!1,function(e){a("8a5D")},"data-v-4fa2a15d",null).exports,I={data:function(){return{username:"",password:""}},methods:{login:function(){console.log(this.username+" & "+this.password),this.$router.push("/about")},reset:function(){console.log("username is :"+this.username),this.username="",this.password=""}}},k={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[a("div",{staticClass:"login-box"},[a("div",{staticClass:"login-title"},[e._v("\n      网站投票管理系统\n    ")]),e._v(" "),a("div",{staticClass:"login-container"},[a("el-input",{staticClass:"input",attrs:{autofocus:"",required:"",type:"text","prefix-icon":"el-icon-edit-outline",placeholder:"请输入姓名"},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}}),e._v(" "),a("el-input",{staticClass:"input",attrs:{type:"password","prefix-icon":"el-icon-edit",placeholder:"请输入用户密码"},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),a("div",{staticClass:"form-group"},[a("el-button",{attrs:{type:"text"}},[e._v("忘记密码")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.login}},[e._v("登录")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:e.reset}},[e._v("重置")])],1)],1)]),e._v(" "),a("div",{staticClass:"copyright"},[e._v("\n    \bCOPYRIGHT © 2017  网站投票管理系统\n  ")])])},staticRenderFns:[]},S=a("VU/8")(I,k,!1,function(e){a("5ovd")},"data-v-1d773b9e",null).exports,j=new b,T={url:"/static/userData.json",datas:{}},U=!1,V={beforeMount:function(){this.loading=!0;this.ajaxMethod(this,T,"投票活动列表初始化失败，请刷新重试！","all")},methods:{ajaxMethod:function(e,t,a,i){return j.get(t).then(function(t){var a=t.data;e.tableData=a.data,e.page.total=a.pagination.total,e.page.pageSize=a.pagination.per_page,e.classificationsOptions.length>0&&(i="forbidden"),i!==e.classificationsOptions&&"all"!==i||(e.classificationsOptions=[],e.classificationsOptions=a.classificationsOptions),e.loading=!1,U=!0}).catch(function(t){t&&console.log(t),e.loading=!1,j.reqFail(self,a),U=!1}),U},handleSelectionChange:function(e){this.multipleSelection=e},handleEvents:function(e){switch(e.method){case"editUser":this.handleEdit(e.index,e.row);break;case"deleteUser":this.handleDelete(e.index,e.row);break;case"stopUser":this.handleStop(e.index,e.row);break;case"activateUser":this.handleActivate(e.index,e.row)}},handleEdit:function(e,t){console.log(e,t),this.$message({showClose:!0,message:"编辑第"+e+"行",type:"success"})},handleDelete:function(e,t){T.datas={},T.datas.voteId=t.voteId,T.url="/static/voteData.1.json";var a="";console.log(this.ajaxMethod(this,T,"删除数据失败")),a=this.ajaxMethod(this,T,"删除数据失败")?"删除第"+(e+1)+"行":"删除第"+(e+1)+"行数据失败",this.$message({showClose:!0,message:a,type:"warning"})},handleStop:function(e,t){},handleActivate:function(e,t){},modifyVoteOpenOrClose:function(e){var t="";e?(T.url="/static/voteData.json",t="发布投票活动操作失败"):(T.url="/static/voteData.json",t="停止投票活动操作失败");var a="";for(var i in this.multipleSelection)a+=this.multipleSelection[i].voteId,a+=",";if(!a.length>0)return!1;T.datas={},T.datas.voteId=a;var o=this;return j.get(T).then(function(e){console.log(o.tableData.indexOf(o.multipleSelection[0])),U=!0}).catch(function(e){e&&console.log(e),o.loading=!1,j.reqFail(o,t),U=!1}),U},startVote:function(){var e="";e=this.modifyVoteOpenOrClose(!0)?"成功发布选中投票活动":"发布选中投票活动失败，请稍后再试",this.$message({showClose:!0,message:e,type:"warning"})},stopVote:function(){var e="";e=this.modifyVoteOpenOrClose(!0)?"成功停止选中投票活动":"停止选中投票活动失败，请稍后再试",this.$message({showClose:!0,message:e,type:"warning"})},itemsDelete:function(){var e="";for(var t in this.multipleSelection)e+=this.multipleSelection[t].voteId,e+=",";e=e.substring(0,e.length-1),T.datas={},T.datas.voteId=e,T.url="/static/voteData.1.json";var a="";a=this.ajaxMethod(this,T,"删除数据失败")?"批量删除失败":"批量删除成功",this.$message({showClose:!0,message:a,type:"warning"})},handleChange:function(e){this.loading=!0,(T={}).url="/static/voteDataClassifictions.json",T.datas={},T.datas.currentPage=this.page.currentPage,T.datas.perPageSize=this.page.pageSize;this.ajaxMethod(this,T,"刷新投票活动列表失败")},handleSizeChange:function(e){this.loading=!0,this.page.pageSize=e,(T={}).datas={},T.datas.perPageSize=e,T.url="/static/voteDataPerPageSize.json",T.datas.currentPage=1;this.ajaxMethod(this,T,"刷新投票活动列表失败")},handleCurrentChange:function(e){this.loading=!0,this.page.currentPage=e,(T={}).datas={},T.url="/static/voteData.1.json",T.datas.currentPage=e;this.ajaxMethod(this,T,"刷新投票活动列表失败")},search:function(e){T.datas={},T.url="/static/voteData.1.json",T.datas.keyWord=this.searchKeyWord;this.ajaxMethod(this,T,"搜索失败，请稍后重试")},createNewVote:function(){this.$router.push("/createNewItem")}},data:function(){return{loading:!0,page:{total:100,pageSizeOptions:[5,10,25,50,100,200],pageSize:15,currentPage:1},classificationsOptions:[],classifications:"",searchKeyWord:"",tableData:[],multipleSelection:[]}}},D={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"systemSetting layout"},[a("nav",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),e._v("管理配置")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统配置")])],1)],1),e._v(" "),a("div",{staticClass:"tool-bar"},[a("div",{staticClass:"tool-bar-btns"},[a("el-button",{staticClass:"control ",attrs:{size:"small",id:"createUser",icon:"el-icon-circle-plus-outline",type:"primary"}},[e._v("新建用户")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"activateUser",icon:"el-icon-upload2",type:"primary"}},[e._v("激活用户")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"stopUser",icon:"el-icon-remove-outline",type:"primary"}},[e._v("停用用户")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"deleteUsers",type:"danger",icon:"el-icon-delete"}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"tool-bar-others"},[a("el-select",{staticClass:"control",attrs:{filterable:"",placeholder:"投票状态"},on:{change:e.handleChange},model:{value:e.classifications,callback:function(t){e.classifications=t},expression:"classifications"}},e._l(e.classificationsOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,command:e.label}})})),e._v(" "),a("div",{staticClass:"search"},[a("el-input",{staticClass:"control input",attrs:{placeholder:"请输入投票名称关键词",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),e._v(" "),a("el-button",{staticClass:"control",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"date",order:"descending"},border:"","header-row-class-name":"tabel-header","highlight-current-row":"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"voteTitle",label:"用户","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"contact",label:"联系方式",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{width:"50",prop:"gender",label:"性别","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createDate",label:"修改日期",width:"105",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{width:"50",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",{attrs:{trigger:"click"},on:{command:e.handleEdit}},[a("span",{staticClass:"el-dropdown-link"},[a("i",{staticClass:"el-icon-more el-icon--right"})]),e._v(" "),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",{attrs:{command:{index:t.$index,row:t.row,method:"editUser"}}},[e._v("\b修改用户")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{index:t.$index,row:t.row,method:"deleteUser"}}},[e._v("删除")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{index:t.$index,row:t.row,method:"stopUser"}}},[e._v("停用")]),e._v(" "),a("el-dropdown-item",{attrs:{command:{index:t.$index,row:t.row,method:"activateUser"}}},[e._v("启用")])],1)],1)]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.pageSizeOptions,"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},staticRenderFns:[]},$=a("VU/8")(V,D,!1,function(e){a("zubk")},"data-v-68bbff88",null).exports,z={data:function(){return{fileConf:{size:500,type:["jpg","png","jpeg"]},fileList3:[{name:"food.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100",status:"finished"},{name:"food2.jpeg",url:"https://fuss10.elemecdn.com/3/63/4e7f3a15429bfda99bce42a18cdd1jpeg.jpeg?imageMogr2/thumbnail/360x360/format/webp/quality/100",status:"finished"}],ruleForm:{name:"",region:"",date1:"",date2:"",delivery:!0,type:["美食/餐厅线上活动"],resource:"线上品牌商赞助",desc:""},rules:{name:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:3,max:5,message:"长度在 3 到 5 个字符",trigger:"blur"}],region:[{required:!0,message:"请选择活动区域",trigger:"change"}],date1:[{type:"date",required:!0,message:"请选择日期",trigger:"change"}],date2:[{type:"date",required:!0,message:"请选择时间",trigger:"change"}],type:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}],resource:[{required:!0,message:"请选择活动资源",trigger:"change"}],desc:[{required:!0,message:"请填写活动形式",trigger:"blur"}]}}},methods:{successUpload:function(e,t,a){console.log(e)},checkFile:function(e){var t=Math.floor(e.size/1204),a=e.type.split("/"),i=a[a.length-1];return console.log(i),t>this.fileConf.size?(alert("超过上传文件的限制大小！"),!1):this.fileConf.type.indexOf(i)<0?(alert("文件类型不符合要求"),!1):void 0},handleChange:function(e,t){},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;console.log(t.fileList3)})},resetForm:function(e){this.$refs[e].resetFields()}}},q={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"base-form layout"},[a("nav",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",[a("i",{staticClass:"el-icon-setting"}),e._v("管理配置")]),e._v(" "),a("el-breadcrumb-item",[e._v("前台配置")])],1)],1),e._v(" "),a("div",{staticClass:"form"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:e.ruleForm,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"活动名称",prop:"name"}},[a("el-input",{model:{value:e.ruleForm.name,callback:function(t){e.$set(e.ruleForm,"name",t)},expression:"ruleForm.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动区域",prop:"region"}},[a("el-select",{attrs:{placeholder:"请选择活动区域"},model:{value:e.ruleForm.region,callback:function(t){e.$set(e.ruleForm,"region",t)},expression:"ruleForm.region"}},[a("el-option",{attrs:{label:"区域一",value:"shanghai"}}),e._v(" "),a("el-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动时间",required:""}},[a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date1"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.ruleForm.date1,callback:function(t){e.$set(e.ruleForm,"date1",t)},expression:"ruleForm.date1"}})],1)],1),e._v(" "),a("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{prop:"date2"}},[a("el-time-picker",{staticStyle:{width:"100%"},attrs:{type:"fixed-time",placeholder:"选择时间"},model:{value:e.ruleForm.date2,callback:function(t){e.$set(e.ruleForm,"date2",t)},expression:"ruleForm.date2"}})],1)],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"即时配送",prop:"delivery"}},[a("el-switch",{attrs:{checked:""},model:{value:e.ruleForm.delivery,callback:function(t){e.$set(e.ruleForm,"delivery",t)},expression:"ruleForm.delivery"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"活动性质",prop:"type"}},[a("el-checkbox-group",{model:{value:e.ruleForm.type,callback:function(t){e.$set(e.ruleForm,"type",t)},expression:"ruleForm.type"}},[a("el-checkbox",{attrs:{label:"美食/餐厅线上活动",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"地推活动",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"线下主题活动",name:"type"}}),e._v(" "),a("el-checkbox",{attrs:{label:"单纯品牌曝光",name:"type"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"特殊资源",prop:"resource"}},[a("el-radio-group",{model:{value:e.ruleForm.resource,callback:function(t){e.$set(e.ruleForm,"resource",t)},expression:"ruleForm.resource"}},[a("el-radio",{attrs:{label:"线上品牌商赞助"}}),e._v(" "),a("el-radio",{attrs:{label:"线下场地免费"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"活动形式",prop:"desc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.ruleForm.desc,callback:function(t){e.$set(e.ruleForm,"desc",t)},expression:"ruleForm.desc"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"附件上传",prop:"fileList3"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/assets",autoUpload:!1,"on-change":e.handleChange,"before-upload":e.checkFile,"on-success":e.successUpload,"file-list":e.fileList3}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitForm("ruleForm")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("ruleForm")}}},[e._v("重置")])],1)],1)],1)])},staticRenderFns:[]},M=a("VU/8")(z,q,!1,function(e){a("Dup0")},null,null).exports,O={initSecondCount:5},N={userManagerRequestUrlConfig:{list:"/colife/activity/admin/list/",delete:"/colife/activity/admin/delete/",add:"/colife/activity/admin/add/"}},P={userManagerNumToStr:{isAdmin:{1:"是",0:"否"},userStatus:{1:"启用",0:"停用"}}},E=new b,L={url:"",datas:{}},R=!1,W={beforeMount:function(){this.initDatas(),this.classificationsOptions=this.initClassificationsOptions()},methods:{initDatas:function(){L.url=N.userManagerRequestUrlConfig.list+"?pageNumber=1&pageSize=10",L.datas={},this.loading=!0;this.ajaxMethod(this,L,"用户列表初始化失败，请刷新重试！","all")},initClassificationsOptions:function(){var e=[],t=P.userManagerNumToStr.userStatus;for(var a in t)if(t.hasOwnProperty(a)){var i={};i.value=a,i.label=t[a],e.push(i)}return e},ajaxMethod:function(e,t,a,i){return E.get(t).then(function(t){var a=t.data;e.tableData=[],a.data.content.forEach(function(t){var a={},i=P.userManagerNumToStr,o=i.isAdmin,s=i.userStatus;t.objId&&(a.objId=t.objId),t.createTime&&(a.createTime=E.formatDate(t.createTime,"-",!1).split(" ")[0]),t.nickname&&(a.nickname=t.nickname),a.isAdmin=o[t.isAdmin],t.username&&(a.username=t.username),a.status=s[t.status],e.tableData.push(a)}),e.page.total=a.data.totalElements,e.page.pageSize=a.data.size,e.page.totalPages=a.data.totalPages,e.page.currentPage=a.data.number+1,e.loading=!1,R=!0}).catch(function(t){t&&console.log(t),e.loading=!1,E.reqFail(e,a),R=!1}),R},ajaxMethodDelete:function(e,t,a,i){E.delete(t).then(function(t){if(e.loading=!1,"000000"!==t.data.state)return E.reqSuccess(e,t.data.message),!1;e.initDatas()}).catch(function(t){e.loading=!1,console.log(t)})},toggleSelection:function(e){var t=this;e?e.forEach(function(e){t.$refs.multipleTable.toggleRowSelection(e)}):this.$refs.multipleTable.clearSelection()},handleSelectionChange:function(e){this.multipleSelection=e},editUser:function(){var e="";return 0===this.multipleSelection.length?(E.reqFail(this,"未选中用户，请至少选择一项"),!1):this.multipleSelection.length>1?(E.reqFail(this,"仅能选一项进行修改"),!1):(e=this.multipleSelection[0].objId,void this.$router.push("/editVote/editVote/"+e))},handleEdit:function(e,t){var a=t.objId;this.$router.push("/editVote/editVoteItems/"+a)},handleDelete:function(e,t){L.datas={},L.url=N.userManagerRequestUrlConfig.delete+"?objIds="+t.objId;this.loading=!0;this.ajaxMethodDelete(this,L,"删除数据失败")},modifyUserOpenOrClose:function(e){var t="",a="";e?(L.url="/colife/activity/vote/publish",t="启用用户操作失败",a="已发布"):(L.url="/colife/activity/vote/unpublish",t="停用用户操作失败",a="未发布");var i="";for(var o in this.multipleSelection)i+=this.multipleSelection[o].objId,i+=",";if(i=i.substring(0,i.length-1),!this.multipleSelection>0)return E.reqFail(this,"未选中用户，请至少选择一项"),!1;L.datas={},i="?objIds="+i,L.url+=i;var s=this;return E.get(L).then(function(e){s.multipleSelection.forEach(function(e){var t=s.tableData.indexOf(e);s.tableData[t].published=a}),R=!0}).catch(function(e){e&&console.log(e),s.loading=!1,E.reqFail(s,t),R=!1}),R},startUser:function(){var e="";this.modifyUserOpenOrClose(!0)&&(e="成功启用选中用户",this.$message({showClose:!0,message:e,type:"warning"}))},stopUser:function(){var e="";this.modifyUserOpenOrClose(!1)&&(e="成功停用选中用户",this.$message({showClose:!0,message:e,type:"warning"}))},itemsDelete:function(){var e="";for(var t in this.multipleSelection)e+=this.multipleSelection[t].objId,e+=",";if(e=e.substring(0,e.length-1),!this.multipleSelection>0)return E.reqFail(this,"未选中用户，请至少选择一项"),!1;L.datas={},L.url=N.userManagerRequestUrlConfig.delete+"?objIds="+e;this.loading=!0,this.ajaxMethodDelete(this,L,"批量删除数据失败")},handleChange:function(e){this.loading=!0,(L={}).url=N.userManagerRequestUrlConfig.list+"?status="+e+"&pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,L,"刷新用户列表失败")},handleSizeChange:function(e){this.loading=!0,this.page.pageSize=e,(L={}).datas={},L.url=N.userManagerRequestUrlConfig.list+"?pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,L,"刷新用户列表失败")},handleCurrentChange:function(e){this.loading=!0,this.page.currentPage=e,(L={}).datas={},L.url=N.userManagerRequestUrlConfig.list+"?pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,L,"刷新用户列表失败")},search:function(){if(""===this.searchKeyWord.replace(/(^\s*)|(\s*$)/gi,""))return E.reqFail(this,"关键词不能为空"),!1;this.loading=!0,L.datas={},L.url=N.userManagerRequestUrlConfig.list+"?username="+this.searchKeyWord+"&pageNumber="+this.page.currentPage+"&pageSize="+this.page.pageSize;this.ajaxMethod(this,L,"搜索失败，请稍后重试")},createNewUser:function(){this.dialogFormVisible=!0},submitUserForm:function(){var e=this;e.$refs.userform.validate(function(t){if(t){var a={};a.url=""+N.userManagerRequestUrlConfig.add,a.datas={},a.datas.username=e.userform.username,a.datas.nickname=e.userform.nickname,a.datas.isAdmin=e.userform.isAdmin,E.post(a).then(function(t){e.initDatas(),e.dialogFormVisible=!1}).catch(function(t){console.log(t),E.reqFail(e,"新建用户失败，请稍后再试")})}else E.reqFail(e,"新建用户表单验证未通过")})}},data:function(){return{loading:!0,page:{total:100,pageSizeOptions:[5,10,25,50,100,200],pageSize:15,currentPage:1},classificationsOptions:[],classifications:"",searchKeyWord:"",userform:{username:"",nickname:"",isAdmin:0},dialogTableVisible:!1,dialogFormVisible:!1,formLabelWidth:"120px",tableData:[],multipleSelection:[]}}},A={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"userManage layout"},[a("nav",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/userManager"}}},[a("i",{staticClass:"el-icon-menu"}),e._v("用户权限管理")])],1)],1),e._v(" "),a("div",{staticClass:"tool-bar"},[a("div",{staticClass:"tool-bar-btns"},[a("el-button",{staticClass:"control ",attrs:{size:"small",id:"createUser",icon:"el-icon-circle-plus-outline",type:"primary"},on:{click:e.createNewUser}},[e._v("新建用户")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"activateUser",icon:"el-icon-upload2",type:"primary"}},[e._v("激活用户")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"stopUser",icon:"el-icon-remove-outline",type:"primary"}},[e._v("停用用户")]),e._v(" "),a("el-button",{staticClass:"control ",attrs:{size:"small",id:"deleteUsers",type:"danger",icon:"el-icon-delete"},on:{click:e.itemsDelete}},[e._v("批量删除")])],1),e._v(" "),a("div",{staticClass:"tool-bar-others"},[a("el-select",{staticClass:"control",attrs:{filterable:"",placeholder:"用户状态"},on:{change:e.handleChange},model:{value:e.classifications,callback:function(t){e.classifications=t},expression:"classifications"}},e._l(e.classificationsOptions,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value,command:e.label}})})),e._v(" "),a("div",{staticClass:"search"},[a("el-input",{staticClass:"control input",attrs:{placeholder:"请输入用户关键词",clearable:""},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.search(t)}},model:{value:e.searchKeyWord,callback:function(t){e.searchKeyWord=t},expression:"searchKeyWord"}}),e._v(" "),a("el-button",{staticClass:"control",attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.search}},[e._v("搜索")])],1)],1)]),e._v(" "),a("div",{staticClass:"table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{"default-sort":{prop:"date",order:"descending"},border:"","header-row-class-name":"tabel-header","highlight-current-row":"",data:e.tableData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[a("el-table-column",{attrs:{type:"selection",width:"40"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"序号",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"username",label:"用户名","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"nickname",label:"用户昵称",width:"150","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{width:"100",prop:"isAdmin",label:"是否管理员","show-overflow-tooltip":""}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"创建日期",width:"105",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{width:"180",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("\b修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"text"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("设置为管理员")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":e.page.pageSizeOptions,"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"注册用户",width:"30%",visible:e.dialogFormVisible,"modal-append-to-body":!1},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[a("el-form",{ref:"userform",attrs:{model:e.userform}},[a("el-form-item",{attrs:{label:"用户名：","label-width":e.formLabelWidth,prop:"username",rules:[{required:!0,message:"用户名必填",trigger:"blur"}]}},[a("el-input",{attrs:{"auto-complete":"",placeholder:"请输入用户名"},model:{value:e.userform.username,callback:function(t){e.$set(e.userform,"username",t)},expression:"userform.username"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"昵称：","label-width":e.formLabelWidth}},[a("el-input",{attrs:{placeholder:"请输入昵称","auto-complete":""},model:{value:e.userform.nickname,callback:function(t){e.$set(e.userform,"nickname",t)},expression:"userform.nickname"}})],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-form-item",{attrs:{label:"是否管理员：","label-width":e.formLabelWidth}},[a("el-switch",{attrs:{"active-value":"1","inactive-value":"0"},model:{value:e.userform.isAdmin,callback:function(t){e.$set(e.userform,"isAdmin",t)},expression:"userform.isAdmin"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitUserForm}},[e._v("提 交")])],1)],1)],1)},staticRenderFns:[]},H=a("VU/8")(W,A,!1,function(e){a("je9q")},"data-v-5c4dcc00",null).exports,B={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{router:"","unique-opened":"","default-active":e.onRouted,"background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"}},[e._l(e.items,function(t){return[t.hasOwnProperty("children")?[a("el-submenu",{key:t.id,attrs:{index:t.index}},[a("template",{slot:"title"},[a("i",{class:t.icon}),e._v(" "),a("span",[e._v(e._s(t.label))])]),e._v(" "),e._l(t.children,function(t){return a("el-menu-item",{key:t.index,attrs:{index:t.index}},[e._v("\n                "+e._s(t.label)+"\n            ")])})],2)]:[a("el-menu-item",{key:t.id,attrs:{index:t.index}},[a("i",{class:t.icon}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.label))])])]]})],2)],1)},staticRenderFns:[]},K={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("header",[a("h2",{staticClass:"logo"},[e._v(e._s(e.logoText))]),e._v(" "),a("el-popover",{ref:"popover5",attrs:{trigger:"hover",placement:"bottom",width:"100"},model:{value:e.visible2,callback:function(t){e.visible2=t},expression:"visible2"}},[a("div",{staticStyle:{"text-align":"center",margin:"0"}},[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(t){e.visible2=!1}}},[e._v("退出")])],1)]),e._v(" "),a("div",{staticClass:"account"},[a("div",{directives:[{name:"popover",rawName:"v-popover:popover5",arg:"popover5"}],staticClass:"logoutBlock"}),e._v(" "),a("div",{staticClass:"photo"}),e._v(" "),a("div",{staticClass:"user-name",attrs:{id:"userName"}},[e._v("\n           "+e._s(e.userName)+"\n        ")])])],1)},staticRenderFns:[]},J={name:"app",components:{vSlider:a("VU/8")({data:function(){return{filterText:"",items:[{id:2,label:"自述",index:"/about",icon:"el-icon-tickets"},{id:1,label:"投票管理",index:"/voteManager",icon:"el-icon-document"},{id:24,label:"用户权限管理",index:"/userManager",icon:"el-icon-menu"},{id:21,label:"\b\b配置管理",index:"setting",icon:"el-icon-setting",children:[{id:22,label:"前台配置",index:"webSetting"},{id:23,label:"系统配置",index:"systemSetting"}]}]}},watch:{},methods:{onClicked:function(){this.$router.push("/about")}},computed:{onRouted:function(){return this.$route.path.replace("/","")}}},B,!1,function(e){a("YtC9")},null,null).exports,vHeader:a("VU/8")({data:function(){return{visible2:!1}},computed:{userName:function(){return"admin"},logoText:function(){return"网站投票管理系统"}}},K,!1,function(e){a("HuQ1")},null,null).exports}},Y={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"wrap"},[t("v-header"),this._v(" "),t("div",{staticClass:"wrap"},[t("vSlider",{staticClass:"left slider"}),this._v(" "),t("router-view",{staticClass:"right container"})],1)],1)},staticRenderFns:[]},Q=a("VU/8")(J,Y,!1,function(e){a("kMjh")},null,null).exports,G=a("mvHQ"),Z=a.n(G),X=new b,ee=null,te={data:function(){return{active:1,activeName:"1",voteForms:{name:"",beginTime:"",endTime:"",imageVote:!1,description:"",imageUrl:"",fileList:[]},voteItems:{domains:[{value:"",resourceUrl:"",docId:null,key:1,adviceValue:"",imageUrl:"",fileList:[]}],max:15,min:1,curOperateItemIndex:"0"},fileConf:{size:1e3,type:["jpg","png","jpeg"],url:h.baseURL+"/colife/activity/vote/upload"}}},watch:{activeName:function(e,t){this.active=e-0}},mounted:function(){var e=document.getElementsByClassName("createNewItem")[0],t=document.getElementById("top_btn"),a=document.getElementById("down_btn"),i=document.body.clientHeight;e.onscroll=function(){e.scrollTop>i/8?(t.style.opacity="1",a.style.opacity="0"):(t.style.opacity="0",a.style.opacity="1")}},methods:{scrollToTop:function(){var e=document.getElementsByClassName("createNewItem")[0],t=e.scrollHeight;ee&&(clearInterval(ee),ee=null),ee=setInterval(function(){e.scrollTop>t&&(clearInterval(ee),t=e.scrollHeight),e.scrollTop-=5,t=e.scrollTop,e.scrollTop<=0&&(clearInterval(ee),e.scrollTop=0)},25)},scrollToBottom:function(){var e=document.getElementsByClassName("createNewItem")[0],t=0;ee&&(clearInterval(ee),ee=null),ee=setInterval(function(){if(e.scrollTop<t)return clearInterval(ee),t=0,!1;e.scrollTop+=5,t=e.scrollTop,e.scrollTop+e.clientHeight>=e.scrollHeight&&(clearInterval(ee),e.scrollTop=e.scrollHeight-e.clientHeight)},25)},setAjaxParams:function(e,t){var a={url:"",datas:{}};return a.url=e,a.datas=t,a},ajaxPostMethod:function(e,t,a,i){X.post(t).then(function(t){if("000000"!==t.data.state)return X.reqFail(e,t.data.message),!1;"2"===e.activeName&&(e.active=3,e.$router.push("/voteManager")),e.voteForms.objId||(e.voteForms.objId=t.data.data.objId,e.activeName="2"),X.reqSuccess(e,a)}).catch(function(t){t&&console.log(t),X.reqFail(e,i)})},ajaxPutMethod:function(e,t,a,i){X.put(t).then(function(t){if("000000"!==t.data.state)return X.reqFail(e,t.data.message),!1;e.voteForms.objId||(e.voteForms.objId=t.data.data.objId),e.activeName="2",X.reqSuccess(e,a)}).catch(function(t){t&&console.log(t),X.reqFail(e,i)})},backToVoteManagementPage:function(){this.$router.push("/voteManager")},listenInputTextChange:function(e,t){if(e.length<this.voteItems.max){var a=this.voteItems.max-e.length;this.voteItems.domains[t].adviceValue="您还能输入"+(a-2)+"个字符"}0===e.length&&(this.voteItems.domains[t].adviceValue="")},submitVoteForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return X.reqFail(t,"注册投票活动表单验证出错"),!1;var a={};a.title=t.voteForms.name,a.beginTime=X.formatDate(t.voteForms.beginTime,"-",!1),a.endTime=X.formatDate(t.voteForms.endTime,"-",!1),a.imageVote=t.voteForms.imageVote?1:0,a.description=t.voteForms.description,t.voteForms.fileList[t.voteForms.fileList.length-1]&&(a.imageUrl=t.voteForms.fileList[t.voteForms.fileList.length-1].url);var i=t.setAjaxParams("/colife/activity/vote",a);t.ajaxPostMethod(t,i,"注册成功","提交活动注册表单失败")})},editVoteForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return X.reqFail(t,"注册投票活动表单验证出错"),!1;if(!t.voteForms.objId)return X.reqFail(t,"修改投票活动表单出错"),!1;var a="/colife/activity/vote/"+t.voteForms.objId,i={};i.title=t.voteForms.name,i.beginTime=X.formatDate(t.voteForms.beginTime,"-",!1),i.endTime=X.formatDate(t.voteForms.endTime,"-",!1),i.imageVote=t.voteForms.imageVote?1:0,i.description=t.voteForms.description,t.voteForms.fileList[t.voteForms.fileList.length-1]&&(i.imageUrl=t.voteForms.fileList[t.voteForms.fileList.length-1].url);var o=t.setAjaxParams(a,i);t.ajaxPutMethod(t,o,"修改成功","提交活动修改表单失败")})},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){var t=this.voteItems.domains.indexOf(e);-1!==t&&this.voteItems.domains.splice(t,1)},addDomain:function(){var e=this,t=this.voteItems.domains.length+1;this.voteItems.domains.push({value:"",resourceUrl:"",docId:null,key:t,adviceValue:"",imageUrl:"",fileList:[]}),setTimeout(function(){e.scrollToBottom()},100)},saveData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return X.reqFail(t,"添加投票活动项表单验证出错"),!1;if(t.voteForms.objId.length<=0)return X.reqFail(t,"请先添加投票活动信息"),!1;var a={};a.voteId=t.voteForms.objId,a.voteItems=[],t.voteItems.domains.forEach(function(e){var t={};t.voteId=a.voteId,t.itemIndex=e.key,t.title=e.value,t.docUrl=e.resourceUrl,t.docId=e.docId,e.fileList[e.fileList.length-1]?t.imageUrl=e.fileList[e.fileList.length-1].url:t.imageUrl="",a.voteItems.push(t)}),a.voteItems=Z()(a.voteItems);var i=t.setAjaxParams("/colife/activity/vote/saveVoteItems",a);t.ajaxPostMethod(t,i,"保存投票项成功","保存投票项失败")})},changeCurOperateItemIndex:function(e){this.voteItems.curOperateItemIndex=e},checkFile:function(e){var t=Math.floor(e.size/1204),a=e.type.split("/"),i=a[a.length-1];return t>this.fileConf.size?(alert("超过上传文件的限制大小！"),!1):!(this.fileConf.type.indexOf(i)<0)||(alert("文件类型不符合要求"),!1)},voteFormsSuccessUpload:function(e,t,a){this.voteForms.imageUrl=e.data.picSrc},errorUpload:function(e,t,a){X.reqFail(this,e.data.message)},successUpload:function(e,t,a){var i=this.voteItems.curOperateItemIndex;this.voteItems.domains[i].imageUrl=e.data.picSrc}}},ae={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createNewItem layout"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title layout-left"},[e._v("\n              新建投票\n          ")]),e._v(" "),a("div",{staticClass:"layout-right"},[a("el-button",{attrs:{size:"small"},on:{click:e.backToVoteManagementPage}},[e._v("返回")])],1)]),e._v(" "),a("div",{staticClass:"content"},[a("div",{staticClass:"layout-left steps"},[a("div",{staticStyle:{height:"300px"}},[a("el-steps",{attrs:{direction:"vertical",active:e.active}},[a("el-step",{attrs:{title:"步骤 1"}}),e._v(" "),a("el-step",{attrs:{title:"步骤 2"}}),e._v(" "),a("el-step",{attrs:{title:"完成"}})],1)],1)]),e._v(" "),a("div",{staticClass:"layout-right forms"},[a("el-collapse",{attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{attrs:{title:"注册投票活动",name:"1"}},[a("div",{staticClass:"wrap"},[a("el-form",{ref:"voteForms",attrs:{model:e.voteForms,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"投票名称:",prop:"name",rules:[{required:!0,message:"投票名称不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入投票活动名称"},model:{value:e.voteForms.name,callback:function(t){e.$set(e.voteForms,"name",t)},expression:"voteForms.name"}})],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"开始时间:",required:""}},[a("el-form-item",{attrs:{prop:"beginTime",rules:[{required:!0,message:"开始时间不能为空",trigger:"blur"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.voteForms.beginTime,callback:function(t){e.$set(e.voteForms,"beginTime",t)},expression:"voteForms.beginTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间:",required:""}},[a("el-form-item",{attrs:{prop:"endTime",rules:[{required:!0,message:"结束时间不能为空",trigger:"blur"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.voteForms.endTime,callback:function(t){e.$set(e.voteForms,"endTime",t)},expression:"voteForms.endTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否图片类型:",prop:e.voteForms.imageVote+""}},[a("el-col",{attrs:{span:6}},[a("el-switch",{model:{value:e.voteForms.imageVote,callback:function(t){e.$set(e.voteForms,"imageVote",t)},expression:"voteForms.imageVote"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11,push:4}},[e.voteForms.imageVote?a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileConf.url,"show-file-list":!1,"on-success":e.voteFormsSuccessUpload,"before-upload":e.checkFile,"on-error":e.errorUpload,"file-list":e.voteForms.fileList}},[e.voteForms.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.voteForms.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("span",{staticClass:"picture_word"},[e._v("图片上传")])]):e._e()],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"投票内容描述:",prop:e.voteForms.description}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入投票活动的描述内容"},model:{value:e.voteForms.description,callback:function(t){e.$set(e.voteForms,"description",t)},expression:"voteForms.description"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4,push:20}},[a("el-form-item",[e.voteForms.objId?a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.editVoteForm("voteForms")}}},[e._v("修改")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitVoteForm("voteForms")}}},[e._v("下一步")])],1)],1)],1)],1)]),e._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.voteForms.objId,expression:"voteForms.objId"}],attrs:{title:"新建投票项",name:"2"}},[a("p",{staticClass:"tips"},[e._v("温馨提示： 投票活动的选项可以根据我们的需要添加，投票项设置的上限为99，投票项如果超过99个，请及时联系系统管理人员进行配置。同时本投票活动是和WCM系统集成的，所以增加了投票项地址和投票项WCM_DOC_ID的字段信息，这两个属性值均来自WCM系统中，请从WCM中获取并设置。\n")]),e._v(" "),a("el-form",{ref:"voteItems",staticClass:"voteItems",attrs:{model:e.voteItems,"status-icon":"","label-width":"50px"}},[e._l(e.voteItems.domains,function(t,i){return a("el-form-item",{key:t.key,staticClass:"hover voteItemBlock",attrs:{label:i+1+"."}},[a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{xs:23,sm:19}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:17}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{"label-width":"100px",prop:"domains."+i+".value",rules:[{required:!0,message:"投票项名称不能为空",trigger:"blur"}],label:"投票项名称:"}},[a("el-input",{attrs:{maxlength:e.voteItems.max,placeholder:"请输入投票项名称"},on:{input:function(a){e.listenInputTextChange(t.value,i)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:7}},[a("span",{staticClass:"advice"},[e._v(e._s(t.adviceValue))])])],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{"label-width":"100px",prop:"domains."+i+".resourceUrl",rules:[{required:!0,message:"投票项地址不能为空",trigger:"blur"}],label:"投票项地址:"}},[a("el-input",{attrs:{placeholder:"请输入投票项地址"},model:{value:t.resourceUrl,callback:function(a){e.$set(t,"resourceUrl",a)},expression:"domain.resourceUrl"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{"label-width":"100px",prop:"domains."+i+".docId",label:"docId:",rules:[{required:!0,message:"docId不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入ID"},model:{value:t.docId,callback:function(a){e.$set(t,"docId",a)},expression:"domain.docId"}})],1)],1)])],1)],1),e._v(" "),a("el-col",{attrs:{xs:23,sm:4,push:1}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileConf.url,"show-file-list":!1,"on-success":e.successUpload,"before-upload":e.checkFile,"on-error":e.errorUpload,"file-list":t.fileList}},[a("div",{staticClass:"click_wrap",on:{click:function(t){e.changeCurOperateItemIndex(i)}}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("span",{staticClass:"picture_word"},[e._v("图片上传")])])])],1)],1),e._v(" "),a("i",{staticClass:"delete-btn el-icon-circle-close",on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}})],1)}),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.voteForms.objId},on:{click:e.addDomain}},[e._v("新增选项")]),e._v(" "),a("el-button",{attrs:{disabled:!e.voteForms.objId,type:"success"},on:{click:function(t){e.saveData("voteItems")}}},[e._v("保存")])],2)],1)],1)],1)]),e._v(" "),a("i",{staticClass:"fixed top_btn el-icon-arrow-up",attrs:{id:"top_btn"},on:{click:e.scrollToTop}}),e._v(" "),a("i",{staticClass:"fixed down_btn el-icon-arrow-down",attrs:{id:"down_btn"},on:{click:e.scrollToBottom}})])},staticRenderFns:[]},ie=a("VU/8")(te,ae,!1,function(e){a("JTp8")},"data-v-1ffcada4",null).exports,oe={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"layout statisticalAnalysis"},[t("nav",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/voteManager"}}},[t("i",{staticClass:"el-icon-document"}),this._v("投票管理")]),this._v(" "),t("el-breadcrumb-item",[this._v("统计分析")])],1)],1),this._v(" "),this._m(0,!1,!1)])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toolBar"},[t("div",{staticClass:"title"},[this._v("\n          投票活动名称\n      ")])])}]},se=a("VU/8")(null,oe,!1,null,null,null).exports,le=new b,re=null,ne={beforeMount:function(){this.initeDate()},data:function(){return{active:1,activeName:"1",loading:!0,voteForms:{objId:"",name:"",beginTime:"",endTime:"",imageVote:!1,description:"",imageUrl:"",fileList:[]},voteItems:{domains:[{objId:"",voteId:"",value:"",resourceUrl:"",docId:null,key:1,adviceValue:"",imageUrl:"",fileList:[]}],max:15,min:1,curOperateItemIndex:"0"},fileConf:{size:1e3,type:["jpg","png","jpeg"],url:h.baseURL+"/colife/activity/vote/upload"}}},computed:{isEditVoteItems:function(){return"editVoteItems"===this.$route.params.name},isEditVote:function(){return"editVote"===this.$route.params.name}},watch:{activeName:function(e,t){this.active=e-0}},mounted:function(){var e=document.getElementsByClassName("editVote")[0],t=document.getElementById("top_btn"),a=document.getElementById("down_btn"),i=document.body.clientHeight;e.onscroll=function(){e.scrollTop>i/8?(t.style.opacity="1",a.style.opacity="0"):(t.style.opacity="0",a.style.opacity="1")}},methods:{initeDate:function(){var e=this.$route.params.voteId,t={},a=this;t.url="/colife/activity/vote/"+e,a.loading=!0;le.get(t).then(function(e){if("000000"!==e.data.state)return le.reqFail(a,e.data.message),!1;a.voteForms.objId=e.data.data.objId,a.voteForms.name=e.data.data.title,a.voteForms.beginTime=e.data.data.beginTime,a.voteForms.endTime=e.data.data.endTime,a.voteForms.imageVote=e.data.data.imageVote,a.voteForms.description=e.data.data.contentDesc,a.voteForms.imageUrl=e.data.data.attachUrl,a.voteItems.domains.length=0,e.data.data.voteItemDOs.forEach(function(e){var t={};t.voteId=e.voteId,t.objId=e.objId,t.value=e.title,t.resourceUrl=e.docUrl,t.key=e.itemIndex,t.imageUrl=e.imageUrl,t.docId=e.docId;var i=a.voteItems.max-e.title.length;t.adviceValue="您还能输入"+(i-2)+"个字符",a.voteItems.domains.push(t)}),a.activeName="2",a.loading=!1}).catch(function(e){console.log(e),a.loading=!1,le.reqFail(a,"加载投票信息失败")})},scrollToTop:function(){var e=document.getElementsByClassName("editVote")[0],t=e.scrollHeight;re&&(clearInterval(re),re=null),re=setInterval(function(){e.scrollTop>t&&(clearInterval(re),t=e.scrollHeight),e.scrollTop-=5,t=e.scrollTop,e.scrollTop<=0&&(clearInterval(re),e.scrollTop=0)},25)},scrollToBottom:function(){var e=document.getElementsByClassName("editVote")[0],t=0;re&&(clearInterval(re),re=null),re=setInterval(function(){if(e.scrollTop<t)return clearInterval(re),t=0,!1;e.scrollTop+=5,t=e.scrollTop,e.scrollTop+e.clientHeight>=e.scrollHeight&&(clearInterval(re),e.scrollTop=e.scrollHeight-e.clientHeight)},25)},setAjaxParams:function(e,t){var a={url:"",datas:{}};return a.url=e,a.datas=t,a},ajaxPostMethod:function(e,t,a,i){le.post(t).then(function(t){if("000000"!==t.data.state)return le.reqFail(e,t.data.message),!1;"2"===e.activeName&&(e.active=3,e.$router.push("/voteManager")),e.voteForms.objId||(e.voteForms.objId=t.data.data.objId,e.activeName="2"),le.reqSuccess(e,a)}).catch(function(t){t&&console.log(t),le.reqFail(e,i)})},ajaxPutMethod:function(e,t,a,i){le.put(t).then(function(t){if("000000"!==t.data.state)return le.reqFail(e,t.data.message),!1;e.voteForms.objId||(e.voteForms.objId=t.data.data.objId),e.activeName="2",le.reqSuccess(e,a)}).catch(function(t){t&&console.log(t),le.reqFail(e,i)})},backToVoteManagementPage:function(){this.$router.push("/voteManager")},listenInputTextChange:function(e,t){if(e.length<this.voteItems.max){var a=this.voteItems.max-e.length;this.voteItems.domains[t].adviceValue="您还能输入"+(a-2)+"个字符"}0===e.length&&(this.voteItems.domains[t].adviceValue="")},submitVoteForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return le.reqFail(t,"注册投票活动表单验证出错"),!1;var a={};a.title=t.voteForms.name,a.beginTime=le.formatDate(t.voteForms.beginTime,"-",!1),a.endTime=le.formatDate(t.voteForms.endTime,"-",!1),a.imageVote=t.voteForms.imageVote?1:0,a.contentDesc=t.voteForms.description,t.voteForms.fileList[t.voteForms.fileList.length-1]&&(a.attachUrl=t.voteForms.fileList[t.voteForms.fileList.length-1].url);var i=t.setAjaxParams("/colife/activity/vote",a);t.ajaxPostMethod(t,i,"注册成功","提交活动注册表单失败")})},editVoteForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return le.reqFail(t,"注册投票活动表单验证出错"),!1;if(!t.voteForms.objId)return le.reqFail(t,"修改投票活动表单出错"),!1;var a="/colife/activity/vote/"+t.voteForms.objId,i={};i.title=t.voteForms.name,i.beginTime=le.formatDate(t.voteForms.beginTime,"-",!1),i.endTime=le.formatDate(t.voteForms.endTime,"-",!1),i.imageVote=t.voteForms.imageVote?1:0,i.contentDesc=t.voteForms.description,i.attachUrl=t.voteForms.imageUrl;var o=t.setAjaxParams(a,i);t.ajaxPutMethod(t,o,"修改成功","提交活动修改表单失败")})},resetForm:function(e){this.$refs[e].resetFields()},removeDomain:function(e){console.log(e);var t=this.voteItems.domains.indexOf(e),a={},i=this;a.url="/colife/activity/vote/voteItem/"+e.objId,le.delete(a).then(function(e){if(""!==e.data.state)return le.reqFail(i,e.data.message),!1;-1!==t&&this.voteItems.domains.splice(t,1)}).catch(function(e){console.log(e),le.reqSuccess(i,"删除失败")})},addDomain:function(){var e=this,t=this.voteItems.domains.length+1;this.voteItems.domains.push({objId:"",voteId:"",value:"",resourceUrl:"",docId:null,key:t,adviceValue:"",imageUrl:"",fileList:[]}),setTimeout(function(){e.scrollToBottom()},100)},saveData:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return le.reqFail(t,"添加投票活动项表单验证出错"),!1;if(t.voteForms.objId.length<=0)return le.reqFail(t,"请先添加投票活动信息"),!1;var a={};a.voteId=t.voteForms.objId,a.voteItems=[],t.voteItems.domains.forEach(function(e){var t={};t.voteId=e.voteId,t.objId=e.objId,t.itemIndex=e.key,t.title=e.value,t.docUrl=e.resourceUrl,t.imageUrl=e.imageUrl,t.docId=e.docId,a.voteItems.push(t)}),a.voteItems=Z()(a.voteItems);var i=t.setAjaxParams("/colife/activity/vote/saveVoteItems",a);t.ajaxPostMethod(t,i,"保存投票项成功","保存投票项失败")})},changeCurOperateItemIndex:function(e){this.voteItems.curOperateItemIndex=e},checkFile:function(e){var t=Math.floor(e.size/1204),a=e.type.split("/"),i=a[a.length-1];return t>this.fileConf.size?(alert("超过上传文件的限制大小！"),!1):!(this.fileConf.type.indexOf(i)<0)||(alert("文件类型不符合要求"),!1)},voteFormsSuccessUpload:function(e,t,a){this.voteForms.imageUrl=e.data.picSrc,le.reqSuccess(this,"上传成功")},errorUpload:function(e,t,a){le.reqFail(this,e.data.message)},successUpload:function(e,t,a){var i=this.voteItems.curOperateItemIndex;this.voteItems.domains[i].imageUrl=e.data.picSrc,le.reqSuccess(this,"上传成功")}}},ce={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"editVote layout"},[a("div",{staticClass:"top"},[a("div",{staticClass:"title layout-left"},[e._v("\n              修改投票信息\n          ")]),e._v(" "),a("div",{staticClass:"layout-right"},[a("el-button",{attrs:{size:"small"},on:{click:e.backToVoteManagementPage}},[e._v("返回")])],1)]),e._v(" "),a("div",{staticClass:"content"},[e._e(),e._v(" "),a("div",{staticClass:"center forms"},[a("el-collapse",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{accordion:""},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.isEditVote,expression:"isEditVote"}],attrs:{title:"修改投票活动",name:"1"}},[a("div",{staticClass:"wrap"},[a("el-form",{ref:"voteForms",attrs:{model:e.voteForms,"status-icon":"","label-width":"100px"}},[a("el-form-item",{attrs:{label:"投票名称:",prop:"name",rules:[{required:!0,message:"投票名称不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入投票活动名称"},model:{value:e.voteForms.name,callback:function(t){e.$set(e.voteForms,"name",t)},expression:"voteForms.name"}})],1),e._v(" "),a("el-col",{attrs:{span:11}},[a("el-form-item",{attrs:{label:"开始时间:",required:""}},[a("el-form-item",{attrs:{prop:"beginTime",rules:[{required:!0,message:"开始时间不能为空",trigger:"blur"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.voteForms.beginTime,callback:function(t){e.$set(e.voteForms,"beginTime",t)},expression:"voteForms.beginTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间:",required:""}},[a("el-form-item",{attrs:{prop:"endTime",rules:[{required:!0,message:"结束时间不能为空",trigger:"blur"}]}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:e.voteForms.endTime,callback:function(t){e.$set(e.voteForms,"endTime",t)},expression:"voteForms.endTime"}})],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"是否图片类型:",prop:e.voteForms.imageVote+""}},[a("el-col",{attrs:{span:6}},[a("el-switch",{model:{value:e.voteForms.imageVote,callback:function(t){e.$set(e.voteForms,"imageVote",t)},expression:"voteForms.imageVote"}})],1)],1)],1),e._v(" "),a("el-col",{attrs:{span:11,push:4}},[e.voteForms.imageVote?a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileConf.url,"show-file-list":!1,"on-success":e.voteFormsSuccessUpload,"before-upload":e.checkFile,"on-error":e.errorUpload,"file-list":e.voteForms.fileList}},[e.voteForms.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.voteForms.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("span",{staticClass:"picture_word"},[e._v("图片上传")])]):e._e()],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"投票内容描述:",prop:e.voteForms.description}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入投票活动的描述内容"},model:{value:e.voteForms.description,callback:function(t){e.$set(e.voteForms,"description",t)},expression:"voteForms.description"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:4,push:20}},[a("el-form-item",[e.voteForms.objId?a("el-button",{attrs:{type:"warning"},on:{click:function(t){e.editVoteForm("voteForms")}}},[e._v("修改")]):a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitVoteForm("voteForms")}}},[e._v("下一步")])],1)],1)],1)],1)]),e._v(" "),a("el-collapse-item",{directives:[{name:"show",rawName:"v-show",value:e.isEditVoteItems,expression:"isEditVoteItems"}],attrs:{title:"修改投票项",name:"2"}},[a("p",{staticClass:"tips"},[e._v("温馨提示： 投票活动的选项可以根据我们的需要添加，投票项设置的上限为99，投票项如果超过99个，请及时联系系统管理人员进行配置。同时本投票活动是和WCM系统集成的，所以增加了投票项地址和投票项WCM_DOC_ID的字段信息，这两个属性值均来自WCM系统中，请从WCM中获取并设置。\n")]),e._v(" "),a("el-form",{ref:"voteItems",staticClass:"voteItems",attrs:{model:e.voteItems,"status-icon":"","label-width":"50px"}},[e._l(e.voteItems.domains,function(t,i){return a("el-form-item",{key:t.key,staticClass:"hover voteItemBlock",attrs:{label:i+1+"."}},[a("el-row",{attrs:{gutter:1}},[a("el-col",{attrs:{xs:23,sm:19}},[a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:17}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{"label-width":"100px",prop:"domains."+i+".value",rules:[{required:!0,message:"投票项名称不能为空",trigger:"blur"}],label:"投票项名称:"}},[a("el-input",{attrs:{maxlength:e.voteItems.max,placeholder:"请输入投票项名称"},on:{input:function(a){e.listenInputTextChange(t.value,i)}},model:{value:t.value,callback:function(a){e.$set(t,"value",a)},expression:"domain.value"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:7}},[a("span",{staticClass:"advice"},[e._v(e._s(t.adviceValue))])])],1),e._v(" "),a("el-row",{attrs:{gutter:0}},[a("el-col",{attrs:{span:14}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{"label-width":"100px",prop:"domains."+i+".resourceUrl",rules:[{required:!0,message:"投票项地址不能为空",trigger:"blur"}],label:"投票项地址:"}},[a("el-input",{attrs:{placeholder:"请输入投票项地址"},model:{value:t.resourceUrl,callback:function(a){e.$set(t,"resourceUrl",a)},expression:"domain.resourceUrl"}})],1)],1)]),e._v(" "),a("el-col",{attrs:{span:10}},[a("div",{staticClass:"grid-content"},[a("el-form-item",{attrs:{"label-width":"100px",prop:"domains."+i+".docId",label:"docId:",rules:[{required:!0,message:"docId不能为空",trigger:"blur"}]}},[a("el-input",{attrs:{placeholder:"请输入ID"},model:{value:t.docId,callback:function(a){e.$set(t,"docId",a)},expression:"domain.docId"}})],1)],1)])],1)],1),e._v(" "),a("el-col",{attrs:{xs:23,sm:4,push:1}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:e.fileConf.url,"show-file-list":!1,"on-success":e.successUpload,"before-upload":e.checkFile,"on-error":e.errorUpload,"file-list":t.fileList}},[a("div",{staticClass:"click_wrap",on:{click:function(t){e.changeCurOperateItemIndex(i)}}},[t.imageUrl?a("img",{staticClass:"avatar",attrs:{src:t.imageUrl}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"}),e._v(" "),a("span",{staticClass:"picture_word"},[e._v("图片上传")])])])],1)],1),e._v(" "),a("i",{staticClass:"delete-btn el-icon-circle-close",on:{click:function(a){a.preventDefault(),e.removeDomain(t)}}})],1)}),e._v(" "),a("el-button",{attrs:{type:"primary",disabled:!e.voteForms.objId},on:{click:e.addDomain}},[e._v("新增选项")]),e._v(" "),a("el-button",{attrs:{disabled:!e.voteForms.objId,type:"success"},on:{click:function(t){e.saveData("voteItems")}}},[e._v("保存")])],2)],1)],1)],1)]),e._v(" "),a("i",{staticClass:"fixed top_btn el-icon-arrow-up",attrs:{id:"top_btn"},on:{click:e.scrollToTop}}),e._v(" "),a("i",{staticClass:"fixed down_btn el-icon-arrow-down",attrs:{id:"down_btn"},on:{click:e.scrollToBottom}})])},staticRenderFns:[]},ue=a("VU/8")(ne,ce,!1,function(e){a("aPCb")},"data-v-6a434a82",null).exports,de={beforeMount:function(){this.remainderSecond()},data:function(){return{count:O.initSecondCount,redirectURL:"http://www.baidu.com"}},methods:{remainderSecond:function(){var e=this,t=setInterval(function(){e.count-=1,console.log(e.count),0===e.count&&(clearInterval(t),window.location.href=e.redirectURL)},1e3)},redirectTargetUrl:function(){window.location.href=this.redirectURL}}},me={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("div",{staticClass:"error"},[t("div",{staticClass:"error__number"}),this._v(" "),this._m(0,!1,!1),this._v(" "),t("div",{staticClass:"error__button"},[t("div",{staticClass:"label"},[t("span",{staticClass:"count"},[this._v(this._s(this.count))]),this._v("秒后")]),this._v(" "),t("el-button",{attrs:{round:""},on:{click:this.redirectTargetUrl}},[this._v("回到上个页面")])],1)])])},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"error__word"},[t("p",{staticClass:"description"},[this._v("\n                  This Page Could Not Be Found !\n              ")])])}]},ve=a("VU/8")(de,me,!1,function(e){a("SfJD")},"data-v-8e8d6682",null).exports;i.default.use(l.a);var pe=new l.a({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:S},{path:"/error",name:"error",component:ve},{path:"/system",component:Q,name:"system",children:[{path:"/editVote/:name/:voteId",component:ue},{path:"/voteManager",component:w},{path:"/statisticalAnalysis",component:se},{path:"/",redirect:"/about"},{path:"/about",name:"about",component:n},{path:"/systemSetting",name:"systemSetting",component:$},{path:"/webSetting",name:"webSetting",component:M},{path:"/userManager",name:"userManager",component:H},{path:"/createNewItem",name:"createNewItem",component:ie}]}]}),he=a("zL8q"),ge=a.n(he);a("tvR6");i.default.config.productionTip=!1,i.default.use(ge.a),new i.default({router:pe,template:"<App/>",components:{App:s}}).$mount("#app")},SfJD:function(e,t){},YtC9:function(e,t){},aPCb:function(e,t){},hiuc:function(e,t){},jWFu:function(e,t){},je9q:function(e,t){},kMjh:function(e,t){},tvR6:function(e,t){},zubk:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.6e4cbf796eab8c9d6b02.js.map